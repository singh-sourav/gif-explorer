(this["webpackJsonpgif-explorer"]=this["webpackJsonpgif-explorer"]||[]).push([[0],{21:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(7),i=n.n(c),o=(n(21),n(3)),u=n(9),s=n(6),l=n.n(s),d=n(13),f="VRQPLiguaZxwUaQUhcdjJU8wDrI1KJKU",h="https://api.giphy.com",g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cheeseburgers",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r="".concat(h,"/v1/gifs/search?api_key=").concat(f,"&&q=").concat(t,"&&limit=").concat(n,"&&offset=").concat(e,"&&random_id=e826c9fc5c929e0d6c6d423841a282aa");return r},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n="".concat(h,"/v1/gifs/trending?api_key=").concat(f,"&&limit=").concat(t,"&&offset=").concat(e,"&&random_id=e826c9fc5c929e0d6c6d423841a282aa");return n};function v(){return(v=Object(d.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g(t,n));case 2:return r=e.sent,a=r.json(),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j(t));case 2:return n=e.sent,r=n.json(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(e,t){return{type:"FETCH_GIPHY_SUCCESS",payload:e,offset:t}},p=function(){return{type:"FETCH_IN_PROGRESS"}},O=function(e,t){return function(n){(function(e,t){return v.apply(this,arguments)})(e,t).then((function(t){n(b(t.data,e))}))}},x=function(e){return function(t){(function(e){return m.apply(this,arguments)})(e).then((function(n){t(b(n.data,e))}))}},y=n(5);function w(e,t){var n;return function(){var r=arguments,a=this;n&&clearTimeout(n),n=setTimeout((function(){return e.apply(a,r)}),t)}}var S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],c=t[1],i=a.a.useMemo((function(){return w(r,c)}),[c,r]);return i},I=(n(27),n(1)),C=a.a.createContext(),T=localStorage.getItem("theme");function E(e){var t=a.a.useState(T||"dark"),n=Object(o.a)(t,2),r=n[0],c=n[1];return a.a.useEffect((function(){document.querySelector("html").className=r}),[r]),Object(I.jsx)(C.Provider,{value:{theme:r,updateTheme:function(e){c(e),localStorage.setItem("theme",e)}},children:e.children})}function k(){var e=a.a.useContext(C);if(void 0===e)throw new Error("useThemeContext must be used within a ThemeContextProvider");return e}var N=function(e){var t=k(),n=t.theme,r=t.updateTheme,a=e.lightText,c=e.darkText,i="light"===n?c:a;return Object(I.jsx)("div",{id:"theme-toggler",onClick:function(){r("light"===n?"dark":"light")},children:i})},_=n(2);n(29);var G=function(e){var t=e.key,n=e.src,r=e.width,c=e.height,i=e.lastImage,o=e.alt,u=e.loaderref,s=void 0===u?null:u,l=e.className,d=void 0===l?null:l,f=a.a.useRef();return a.a.useEffect((function(){var e=f.current;e.src=n,e.onload=function(){e.style.visibility="visible",f.current=null}}),[]),Object(I.jsxs)("div",{children:[Object(I.jsx)("img",{id:t,width:r,height:c,ref:f,src:n,alt:o,className:d},t),i&&Object(I.jsx)("div",{ref:s})]})};var F=function(e){var t=e.gifsToAppend,n=e.loaderref,r=e.offset,c=e.loading,i=a.a.useState([[],[],[],[]]),u=Object(o.a)(i,2),s=u[0],l=u[1];a.a.useEffect((function(){for(var e=[[],[],[],[]],n=Math.ceil(t.length/4),a=0;a<4;a++)for(var c=0;c<n;c++){var i=t[c+a*n];i&&e[a].push(i)}l(1===r?[Object(_.a)(e[0]),Object(_.a)(e[1]),Object(_.a)(e[2]),Object(_.a)(e[3])]:function(t){return[[].concat(Object(_.a)(t[0]),Object(_.a)(e[0])),[].concat(Object(_.a)(t[1]),Object(_.a)(e[1])),[].concat(Object(_.a)(t[2]),Object(_.a)(e[2])),[].concat(Object(_.a)(t[3]),Object(_.a)(e[3]))]})}),[t,r]);var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";return e.map((function(e,r,a){return 3===t&&r===a.length-1?Object(I.jsx)(G,{loaderref:n,src:e.images.original.url,width:e.images.original.width,height:e.images.original.height,lastImage:!0,alt:e.title,className:"gif-img"}):Object(I.jsx)(G,{width:e.images.original.width,height:e.images.original.height,src:e.images.original.url,alt:e.title,className:"gif-img"})}))};return c?null:Object(I.jsxs)("div",{className:"row",children:[Object(I.jsx)("div",{className:"column",children:d(s[0])}),Object(I.jsx)("div",{className:"column",children:d(s[1])}),Object(I.jsx)("div",{className:"column",children:d(s[2])}),Object(I.jsx)("div",{className:"column",children:d(s[3],3)})]})};var P=function(e){var t=e.onChangeCallback,n=e.placeholder,r=e.id;return Object(I.jsx)("input",{id:r,placeholder:n,onChange:t})};var A=Object(u.b)((function(e){return{newItemsAdded:e.newItemsAdded,loading:e.loading}}),(function(e){return Object(y.b)({startGiphyFetch:O,startGiphyTrendingFetch:x,fetchGiphyInProgress:p},e)}))((function(e){var t=e.startGiphyFetch,n=e.startGiphyTrendingFetch,r=e.newItemsAdded,c=e.loading,i=e.fetchGiphyInProgress,u=a.a.useRef(),s=a.a.useRef(),l=a.a.useState(1),d=Object(o.a)(l,2),f=d[0],h=d[1],g=a.a.useState(""),j=Object(o.a)(g,2),v=j[0],m=j[1],b=k().theme,p=S((function(e){var t=e.target.value;m(t)}),200);a.a.useEffect((function(){h(1),i(),v?t(1,v):n(1)}),[v,t,n]),a.a.useEffect((function(){f>1&&(v?t(f,v):n(f))}),[f,t,n]);var O=a.a.useCallback((function(e){e[0].isIntersecting&&h((function(e){return e+1}))}),[]),x=S(O,5);return a.a.useEffect((function(){return setTimeout((function(){var e=u.current;return s.current=new IntersectionObserver(x,{root:null,rootMargin:"100px",threshold:0}),e&&s.current.observe(e),function(){e&&s.current.unobserve(e)}}),0)}),[x,r,u]),a.a.useEffect((function(){document.querySelector("#theme-toggler").className=b,document.querySelector("input").className=b}),[b]),Object(I.jsxs)("div",{id:"gif-dashboard",children:[Object(I.jsxs)("div",{className:"gif-query-container",children:[Object(I.jsx)(P,{id:"gif-query-input",placeholder:"Search your favourite GIFs",onChangeCallback:p}),Object(I.jsx)(N,{darkText:"Switch to Dark Mode",lightText:"Switch to Light Mode"})]}),Object(I.jsx)(F,{gifsToAppend:r,offset:f,loaderref:u,loading:c})]})})),R=n(14),q={newItemsAdded:[],loading:!0},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_GIPHY_SUCCESS":return{newItemsAdded:Object(_.a)(t.payload),loading:!1};case"FETCH_IN_PROGRESS":return Object(R.a)(Object(R.a)({},e),{},{loading:!0});default:return e}},U=n(15),M=n.n(U),J=n(16),D=function(){return Object(y.c)(H,Object(y.a)(M.a,J.a))}();i.a.render(Object(I.jsx)(u.a,{store:D,children:Object(I.jsx)(E,{children:Object(I.jsx)(A,{})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.0973f5a6.chunk.js.map