(this["webpackJsonpgif-explorer"]=this["webpackJsonpgif-explorer"]||[]).push([[0],{20:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),i=n.n(c),o=(n(20),n(3)),s=n(9),u=n(6),l=n.n(u),d=n(13),f="VRQPLiguaZxwUaQUhcdjJU8wDrI1KJKU",h="https://api.giphy.com",m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cheeseburgers",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,a="".concat(h,"/v1/gifs/search?api_key=").concat(f,"&&q=").concat(t,"&&limit=").concat(n,"&&offset=").concat(e,"&&random_id=e826c9fc5c929e0d6c6d423841a282aa");return a},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n="".concat(h,"/v1/gifs/trending?api_key=").concat(f,"&&limit=").concat(t,"&&offset=").concat(e,"&&random_id=e826c9fc5c929e0d6c6d423841a282aa");return n};function g(){return(g=Object(d.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(m(t,n));case 2:return a=e.sent,r=a.json(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j(t));case 2:return n=e.sent,a=n.json(),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(e,t){return{type:"FETCH_GIPHY_SUCCESS",payload:e,offset:t}},p=function(e,t){return function(n){(function(e,t){return g.apply(this,arguments)})(e,t).then((function(t){n(b(t.data,e))}))}},O=function(e){return function(t){(function(e){return v.apply(this,arguments)})(e).then((function(n){t(b(n.data,e))}))}},x=n(5);function y(e,t){var n;return function(){var a=arguments,r=this;n&&clearTimeout(n),n=setTimeout((function(){return e.apply(r,a)}),t)}}var w=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],c=t[1],i=r.a.useMemo((function(){return y(a,c)}),[c,a]);return i},S=(n(26),n(1)),C=r.a.createContext(),I=localStorage.getItem("theme");function T(e){var t=r.a.useState(I||"dark"),n=Object(o.a)(t,2),a=n[0],c=n[1];return r.a.useEffect((function(){document.querySelector("html").className=a}),[a]),Object(S.jsx)(C.Provider,{value:{theme:a,updateTheme:function(e){c(e),localStorage.setItem("theme",e)}},children:e.children})}function k(){var e=r.a.useContext(C);if(void 0===e)throw new Error("useThemeContext must be used within a ThemeContextProvider");return e}var E=function(e){var t=k(),n=t.theme,a=t.updateTheme,r=e.lightText,c=e.darkText,i="light"===n?c:r;return Object(S.jsx)("div",{id:"theme-toggler",onClick:function(){a("light"===n?"dark":"light")},children:i})},N=n(2);n(28);var A=function(e){var t=e.key,n=e.src,a=e.width,c=e.height,i=e.lastImage,o=e.alt,s=e.loaderref,u=void 0===s?null:s,l=e.className,d=void 0===l?null:l,f=r.a.useRef();return r.a.useEffect((function(){var e=f.current;e.src=n,e.onload=function(){e.style.visibility="visible",f.current=null}}),[]),Object(S.jsxs)("div",{children:[Object(S.jsx)("img",{id:t,width:a,height:c,ref:f,src:n,alt:o,className:d},t),i&&Object(S.jsx)("div",{ref:u})]})};var _=function(e){var t=e.gifsToAppend,n=e.loaderref,a=e.offset,c=r.a.useState([[],[],[],[]]),i=Object(o.a)(c,2),s=i[0],u=i[1];r.a.useEffect((function(){for(var e=[[],[],[],[]],n=Math.ceil(t.length/4),r=0;r<4;r++)for(var c=0;c<n;c++){var i=t[c+r*n];i&&e[r].push(i)}u(1===a?[Object(N.a)(e[0]),Object(N.a)(e[1]),Object(N.a)(e[2]),Object(N.a)(e[3])]:function(t){return[[].concat(Object(N.a)(t[0]),Object(N.a)(e[0])),[].concat(Object(N.a)(t[1]),Object(N.a)(e[1])),[].concat(Object(N.a)(t[2]),Object(N.a)(e[2])),[].concat(Object(N.a)(t[3]),Object(N.a)(e[3]))]})}),[t,a]);var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";return e.map((function(e,a,r){return 3===t&&a===r.length-1?Object(S.jsx)(A,{loaderref:n,src:e.images.original.url,width:e.images.original.width,height:e.images.original.height,lastImage:!0,alt:e.title,className:"gif-img"}):Object(S.jsx)(A,{width:e.images.original.width,height:e.images.original.height,src:e.images.original.url,alt:e.title,className:"gif-img"})}))};return Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"column",children:l(s[0])},1),Object(S.jsx)("div",{className:"column",children:l(s[1])},2),Object(S.jsx)("div",{className:"column",children:l(s[2])},3),Object(S.jsx)("div",{className:"column",children:l(s[3],3)},4)]})};var F=function(e){var t=e.onChangeCallback,n=e.placeholder,a=e.id;return Object(S.jsx)("input",{id:a,placeholder:n,onChange:t})};var G=Object(s.b)((function(e){return{items:e.items,newItemsAdded:e.newItemsAdded}}),(function(e){return Object(x.b)({startGiphyFetch:p,startGiphyTrendingFetch:O},e)}))((function(e){var t=e.startGiphyFetch,n=e.startGiphyTrendingFetch,a=e.items,c=e.newItemsAdded,i=r.a.useRef(),s=r.a.useState(1),u=Object(o.a)(s,2),l=u[0],d=u[1],f=r.a.useState(""),h=Object(o.a)(f,2),m=h[0],j=h[1],g=k().theme,v=w((function(e){var t=e.target.value;j(t)}),200);r.a.useEffect((function(){d(1),m?t(1,m):n(1)}),[m,t,n]),r.a.useEffect((function(){l>1&&(m?t(l,m):n(l))}),[l,t,n]);var b=r.a.useCallback((function(e){e[0].isIntersecting&&d((function(e){return e+1}))}),[]),p=w(b,10);return r.a.useEffect((function(){return setTimeout((function(){var e=i.current,t=new IntersectionObserver(p,{root:null,rootMargin:"100px",threshold:0});return e&&t.observe(e),function(){e&&t.unobserve(e)}}),0)}),[p,c,i]),r.a.useEffect((function(){document.querySelector("#theme-toggler").className=g,document.querySelector("input").className=g}),[g]),Object(S.jsxs)("div",{id:"gif-dashboard",children:[Object(S.jsxs)("div",{className:"gif-query-container",children:[Object(S.jsx)(F,{id:"gif-query-input",placeholder:"Search your favourite GIFs",onChangeCallback:v}),Object(S.jsx)(E,{darkText:"Switch to Dark Mode",lightText:"Switch to Light Mode"})]}),Object(S.jsx)(_,{gifsToAppend:c,offset:l,items:a,loaderref:i})]})})),q={items:[],newItemsAdded:[]},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_GIPHY_SUCCESS":return t.offset>1?{items:[].concat(Object(N.a)(e.items),Object(N.a)(t.payload)),newItemsAdded:Object(N.a)(t.payload)}:{items:Object(N.a)(t.payload),newItemsAdded:Object(N.a)(t.payload)};default:return e}},M=n(14),P=n.n(M),H=n(15),J=function(){return Object(x.c)(U,Object(x.a)(P.a,H.a))}();i.a.render(Object(S.jsx)(s.a,{store:J,children:Object(S.jsx)(T,{children:Object(S.jsx)(G,{})})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.645235d7.chunk.js.map