{"version":3,"sources":["constants/api.js","api/giphy.js","actions/giphy.js","utils/giphy-util.js","hooks/useDebouncedCallback.js","contexts/ThemeProvider.js","components/ThemeToggler.js","components/GIFContainer.js","components/CustomInput.js","components/Home.js","reducers/giphy.js","index.js","store.js"],"names":["API_KEY","getGiphyURL","offset","query","limit","url","getGiphyTrendingURL","a","fetch","response","json","fetchGiphySuccess","payload","type","startGiphyFetch","dispatch","startGiphySearchAPI","then","items","data","startGiphyTrendingFetch","startGiphyTrendingAPI","debounce","callback","delay","timer","args","arguments","context","this","clearTimeout","setTimeout","apply","useDebouncedCallback","config","debouncedCallback","React","useMemo","ThemeContext","createContext","themeFromLocalStorage","localStorage","getItem","ThemeProvider","props","useState","theme","setTheme","useEffect","document","querySelector","className","Provider","value","updateTheme","setItem","children","useThemeContext","useContext","undefined","Error","ThemeToggler","lightText","darkText","toggleText","id","onClick","GIFContainer","loaderref","map","gif","i","length","ref","src","images","preview_gif","alt","title","CustomInput","onChangeCallback","placeholder","onChange","connect","state","bindActionCreators","useRef","setOffset","setQuery","debouncedQuerySearch","e","searchText","target","intersectionCallback","useCallback","entries","isIntersecting","debouncedIntersectionCallback","toBeObserved","current","observer","IntersectionObserver","root","threshold","observe","unobserve","initialState","giphy","action","store","createStore","applyMiddleware","logger","thunk","storeCreator","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.b75c90a2.chunk.js","sourcesContent":["const API_KEY = \"VRQPLiguaZxwUaQUhcdjJU8wDrI1KJKU\";\n\n/**\n * API for finding Trending GIFs\n * @param {*} offset \n * @param {*} query \n * @param {*} limit \n */\nexport const getGiphyURL = function (\n  offset = 0,\n  query = \"cheeseburgers\",\n  limit = 20\n) {\n  var url = `https://api.giphy.com/v1/gifs/search?api_key=${API_KEY}&&q=${query}&&limit=${limit}&&offset=${offset}&&random_id=e826c9fc5c929e0d6c6d423841a282aa`;\n  return url;\n};\n\n/**\n * API for searching GIFs by query\n * @param {*} offset \n * @param {*} limit \n */\nexport const getGiphyTrendingURL = function (\n    offset = 0,\n    limit = 20\n  ) {\n    var url = `https://api.giphy.com/v1/gifs/trending?api_key=${API_KEY}&&limit=${limit}&&offset=${offset}&&random_id=e826c9fc5c929e0d6c6d423841a282aa`;\n    return url;\n  };\n\n","import { getGiphyURL,getGiphyTrendingURL } from \"../constants/api\";\n\nexport async function startGiphySearchAPI(offset, query) {\n  const response = await fetch(getGiphyURL(offset, query));\n  const json = response.json();\n  return json;\n}\n\nexport async function startGiphyTrendingAPI(offset) {\n    const response = await fetch(getGiphyTrendingURL(offset));\n    const json = response.json();\n    return json;\n  }\n","import {startGiphySearchAPI,startGiphyTrendingAPI} from \"../api/giphy\";\n\nexport const fetchGiphySuccess = (payload, offset) => {\n  return { type: \"FETCH_GIPHY_SUCCESS\", payload, offset };\n};\n\n// Redux-Thunk (Async Action)\nexport const startGiphyFetch = (offset, query) => (dispatch) => {\n  startGiphySearchAPI(offset, query).then((items) => {\n    dispatch(fetchGiphySuccess(items.data, offset));\n  });\n};\n\n\nexport const startGiphyTrendingFetch = (offset) => (dispatch) => {\n  startGiphyTrendingAPI(offset).then((items) => {\n    dispatch(fetchGiphySuccess(items.data, offset));\n  });\n};\n","export function debounce(callback, delay) {\n  let timer;\n  return function () {\n    const args = arguments;\n    const context = this;\n    if (timer) {\n      clearTimeout(timer);\n    }\n    timer = setTimeout(() => callback.apply(context, args), delay);\n  };\n}\n","import React from \"react\";\nimport {debounce} from \"../utils/giphy-util\";\n\n/**\n * Custom Hook for debouncing any callback with specified delay\n * To Note : The result is memoised so that multiple renders don't result in re-execution of\n * debounce function\n * @param  {...any} config \n */\nfunction useDebouncedCallback(...config) {\n  const [callback, delay] = config;\n  const debouncedCallback = React.useMemo(() => debounce(callback, delay), [\n    delay,\n    callback\n  ]);\n  return debouncedCallback;\n}\n\nexport default useDebouncedCallback;\n","import React from \"react\";\n\nconst ThemeContext = React.createContext();\nconst themeFromLocalStorage = localStorage.getItem(\"theme\");\n\nexport function ThemeProvider(props) {\n  const [theme, setTheme] = React.useState(themeFromLocalStorage || \"dark\");\n\n  /**\n   * Storing the theme in localstorage for future visits\n   */\n  const updateTheme = (theme) => {\n    setTheme(theme);\n    localStorage.setItem(\"theme\", theme);\n  };\n\n  /**\n   * This effect has global logic of how theme can be used.\n   * Children can also have their overriding effects\n   */\n  React.useEffect(() => {\n    document.querySelector(\"html\").className = theme;\n  }, [theme]);\n\n  return (\n    <ThemeContext.Provider value={{ theme, updateTheme }}>\n      {props.children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useThemeContext() {\n  const context = React.useContext(ThemeContext);\n  if (context === undefined) {\n    throw new Error(\n      \"useThemeContext must be used within a ThemeContextProvider\"\n    );\n  }\n  return context;\n}\n","import { useThemeContext } from \"../contexts/ThemeProvider\";\n\nfunction ThemeToggler(props) {\n  const { theme, updateTheme } = useThemeContext();\n  const { lightText, darkText } = props;\n\n  const toggleTheme = () => {\n    updateTheme(theme === \"light\" ? \"dark\" : \"light\");\n  };\n\n  const toggleText = theme === \"light\" ? darkText : lightText;\n\n  return (\n    <div id=\"theme-toggler\" onClick={toggleTheme}>\n      {toggleText}\n    </div>\n  );\n}\n\nexport default ThemeToggler;\n","import \"./styles/GIFContainer.css\";\n\nfunction GIFContainer(props) {\n  const { items, loaderref } = props;\n  return (\n    <div id=\"gif-container\">\n      {items.map((gif, i) => {\n        if (i === items.length - 1) {\n          return (\n            <img\n              key={i}\n              ref={loaderref}\n              src={gif.images.preview_gif.url}\n              alt={gif.title}\n              className=\"gif-img\"\n            />\n          );\n        }\n        return (\n          <img\n            key={i}\n            src={gif.images.preview_gif.url}\n            alt={gif.title}\n            className=\"gif-img\"\n          />\n        );\n      })}\n    </div>\n  );\n}\n\nexport default GIFContainer;\n","function CustomInput(props) {\n  const { onChangeCallback, placeholder, id } = props;\n  return (\n    <input id={id} placeholder={placeholder} onChange={onChangeCallback} />\n  );\n}\n\nexport default CustomInput;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { startGiphyFetch, startGiphyTrendingFetch } from \"../actions/giphy\";\nimport { bindActionCreators } from \"redux\";\nimport useDebouncedCallback from \"../hooks/useDebouncedCallback\";\nimport \"./styles/Home.css\";\nimport { useThemeContext } from \"../contexts/ThemeProvider\";\nimport ThemeToggler from \"./ThemeToggler\";\nimport GIFContainer from \"./GIFContainer\";\nimport CustomInput from \"./CustomInput\";\n\nfunction Home(props) {\n  const { startGiphyFetch, startGiphyTrendingFetch, items } = props;\n  const loaderref = React.useRef();\n  const [offset, setOffset] = React.useState(1);\n  const [query, setQuery] = React.useState(\"\");\n\n  /**\n   * Custom React Context to get the theme\n   */\n  const { theme } = useThemeContext();\n\n  /**\n   * Debouncing the Query Search to save extra network calls\n   */\n  const debouncedQuerySearch = useDebouncedCallback((e) => {\n    const searchText = e.target.value;\n    setQuery(searchText);\n  }, 600);\n\n\n  /**\n   * Effect based upon query search\n   * Reset the offset to 1.\n   * Triggers the actions for offset 1\n   */\n  React.useEffect(() => {\n    setOffset(1);\n    if (query) startGiphyFetch(1, query);\n    else startGiphyTrendingFetch(1);\n  }, [query,startGiphyFetch,startGiphyTrendingFetch]);\n// \n  /**\n   *\n   * Infinite Scrolling :\n   * Effect based upon offset ( >1 )\n   * Keeping 'query' same when offset changes\n   * If query is empty, it fetches the trending GIFS\n   *\n   */\n  React.useEffect(() => {\n    if(offset>1){\n    if (query) startGiphyFetch(offset, query);\n    else startGiphyTrendingFetch(offset);\n    }\n  }, [offset, startGiphyFetch, startGiphyTrendingFetch]);\n\n  /**\n   * Optimised Intersection Callback :\n   * useCallback prevents re-creation of this callback across re-renders\n   */\n  const intersectionCallback = React.useCallback((entries) => {\n    if (entries[0].isIntersecting) {\n      setOffset((offset) => offset + 1);\n    }\n  }, []);\n\n  /**\n   * This callback would be called when target is in viewport.\n   * Debouncing it, to avoid extra calls.\n   */\n  const debouncedIntersectionCallback = useDebouncedCallback(\n    intersectionCallback,\n    600\n  );\n\n  /**\n   * Effect :\n   * Intersection Observer will observe the last GIF (target) on web page.\n   * The Observer should be re-created when the last GIF on webpage changes.\n   * So, using [items] as dependency of this hook\n   */\n  React.useEffect(() => {\n    const toBeObserved = loaderref.current;\n    const observer = new IntersectionObserver(debouncedIntersectionCallback, {\n      root: null,\n      threshold: 0,\n    });\n\n    if (toBeObserved) observer.observe(toBeObserved);\n\n    return () => {\n      if (toBeObserved) observer.unobserve(toBeObserved);\n    };\n  }, [debouncedIntersectionCallback, items]);\n\n  /**\n   * Global Theme Logic is present in Theme provider\n   * Any custom Logic/Overriding can be used like this in child components\n   */\n  React.useEffect(() => {\n    document.querySelector(\"#theme-toggler\").className = theme;\n    document.querySelector(\"input\").className = theme;\n  }, [theme]);\n\n  return (\n    <div id=\"gif-dashboard\">\n      <div className=\"gif-query-container\">\n        <CustomInput\n          id=\"gif-query-input\"\n          placeholder=\"Search your favourite GIFs\"\n          onChangeCallback={debouncedQuerySearch}\n        />\n        <ThemeToggler\n          darkText=\"Switch to Dark Mode\"\n          lightText=\"Switch to Light Mode\"\n        />\n      </div>\n      <GIFContainer items={items} loaderref={loaderref} />\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    items: state.items,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(\n    {\n      startGiphyFetch,\n      startGiphyTrendingFetch,\n    },\n    dispatch\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\n","const initialState = {\n  items: [],\n};\n\nconst giphy = (state = initialState, action) => {\n  switch (action.type) {\n    case \"FETCH_GIPHY_SUCCESS\": {\n      if (action.offset > 1) {\n        return {\n          items: [...state.items, ...action.payload],\n        };\n      } else {\n        return {\n          items: [...action.payload],\n        };\n      }\n    }\n    default:\n      return state;\n  }\n};\n\nexport default giphy;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport Home from \"./components/Home\";\nimport storeCreator from \"./store\";\nimport { Provider } from \"react-redux\";\nimport { ThemeProvider } from \"./contexts/ThemeProvider\";\n\nconst store = storeCreator();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ThemeProvider>\n      <Home />\n    </ThemeProvider>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n","import { createStore, applyMiddleware } from \"redux\";\nimport giphy from \"./reducers/giphy\";\nimport logger from \"redux-logger\";\nimport thunk from \"redux-thunk\";\n\nconst storeCreator = () => {\n  return createStore(giphy, applyMiddleware(logger, thunk));\n};\n\nexport default storeCreator;\n"],"sourceRoot":""}